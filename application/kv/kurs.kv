MDScreenManager:
    id: main_screen_manager

    MDScreen:
        name: 'main'

        MDBoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.9
            spacing: 20
            padding: 20

            MDRectangleFlatButton:
                size_hint_x: 0.5
                pos_hint: {"center_x": 0.5}
                text: "Справочные документы"
                on_press: main_screen_manager.current = 'tables'

            MDRectangleFlatButton:
                size_hint_x: 0.5
                pos_hint: {"center_x": 0.5}
                text: "Оперативные документы"
                on_press: main_screen_manager.current = 'operation_tables'

        Navigation:
            title: "АРМ \"Начальника производственного цеха предприятия\""

    MDScreen:
        name: 'tables'

        MDNavigationLayout:
            MDScreenManager:
                id: table_screen_manager

                MDScreen:
                    name: 'table_choose'

                    MDBoxLayout:
                        orientation: 'vertical'
                        size_hint_y: 0.9
                        spacing: 20
                        padding: 20

                        MDRectangleFlatButton:
                            size_hint_x: 0.5
                            pos_hint: {"center_x": 0.5}
                            text: "Список клиентов СПТ"
                            on_press: table_screen_manager.current = 'customer_view'

                        MDRectangleFlatButton:
                            size_hint_x: 0.5
                            pos_hint: {"center_x": 0.5}
                            text: "Справочник работников цеха"
                            on_press: table_screen_manager.current = 'worker_view'

                        MDRectangleFlatButton:
                            size_hint_x: 0.5
                            pos_hint: {"center_x": 0.5}
                            text: "Каталог работ"
                            on_press: table_screen_manager.current = 'work_view'

                        MDRectangleFlatButton:
                            size_hint_x: 0.5
                            pos_hint: {"center_x": 0.5}
                            text: "Справочник СПТ"
                            on_press: table_screen_manager.current = 'spt_view'

                        MDRectangleFlatButton:
                            size_hint_x: 0.5
                            pos_hint: {"center_x": 0.5}
                            text: "Назад"
                            on_press: main_screen_manager.current = 'main'

                MDScreen:
                    name: 'customer_view'

                    MDBoxLayout:
                        orientation: 'vertical'
                        size_hint_y: 0.9
                        spacing: 20
                        padding: 20

                        CustomerView:
                            id: customer_list

                        MDBoxLayout:
                            orientation: 'horizontal'
                            size_hint_y: 0.1

                            MDRectangleFlatButton:
                                text: "Назад"
                                size_hint_x: 0.2
                                on_press: table_screen_manager.current = 'table_choose'
                            MDLabel:
                                size_hint_x: 0.8

                MDScreen:
                    name: 'worker_view'

                    MDBoxLayout:
                        orientation: 'vertical'
                        size_hint_y: 0.9
                        spacing: 20
                        padding: 20

                        WorkerView:
                            id: worker_list

                        MDBoxLayout:
                            orientation: 'vertical'
                            size_hint_y: 0.1

                            MDRectangleFlatButton:
                                text: "Назад"
                                size_hint_x: 0.5
                                pos_hint: {"center_x": 0.5}
                                on_press: table_screen_manager.current = 'table_choose'

                MDScreen:
                    name: 'work_view'

                    MDBoxLayout:
                        orientation: 'vertical'
                        size_hint_y: 0.9
                        spacing: 20
                        padding: 20

                        WorkView:
                            id: work_list

                        MDBoxLayout:
                            orientation: 'vertical'
                            size_hint_y: 0.1

                            MDRectangleFlatButton:
                                text: "Назад"
                                size_hint_x: 0.5
                                pos_hint: {"center_x": 0.5}
                                on_press: table_screen_manager.current = 'table_choose'

                MDScreen:
                    name: 'spt_view'

                    MDBoxLayout:
                        orientation: 'vertical'
                        size_hint_y: 0.9
                        spacing: 20
                        padding: 20

                        SPTView:
                            id: spt_list

                        MDBoxLayout:
                            orientation: 'vertical'
                            size_hint_y: 0.1

                            MDRectangleFlatButton:
                                text: "Назад"
                                size_hint_x: 0.5
                                pos_hint: {"center_x": 0.5}
                                on_press: table_screen_manager.current = 'table_choose'

        Navigation:
            title: "Справочные документы"

    MDScreen:
        name: 'operation_tables'

        MDNavigationLayout:
            MDScreenManager:
                id: operation_table_screen_manager

                MDScreen:
                    name: 'table_choose'

                    MDBoxLayout:
                        orientation: 'vertical'
                        size_hint_y: 0.9
                        spacing: 20
                        padding: 20

                        MDRectangleFlatButton:
                            size_hint_x: 0.5
                            pos_hint: {"center_x": 0.5}
                            text: "Спецификация на выполнение работ"
                            on_press: operation_table_screen_manager.current = 'specification_view'

                        MDRectangleFlatButton:
                            size_hint_x: 0.5
                            pos_hint: {"center_x": 0.5}
                            text: "Наряд-задание"
                            on_press: operation_table_screen_manager.current = 'task_view'

                        MDRectangleFlatButton:
                            size_hint_x: 0.5
                            pos_hint: {"center_x": 0.5}
                            text: "Назад"
                            on_press: main_screen_manager.current = 'main'

                MDScreen:
                    name: 'specification_view'

                    MDBoxLayout:
                        orientation: 'vertical'
                        size_hint_y: 0.9
                        spacing: 20
                        padding: 20

                        SpecificationView:
                            id: specification_list

                        MDBoxLayout:
                            orientation: 'horizontal'
                            size_hint_y: 0.1

                            MDRectangleFlatButton:
                                text: "Назад"
                                size_hint_x: 0.2
                                on_press: operation_table_screen_manager.current = 'table_choose'
                            MDLabel:
                                size_hint_x: 0.8

                MDScreen:
                    name: 'task_view'

                    MDBoxLayout:
                        orientation: 'vertical'
                        size_hint_y: 0.9
                        spacing: 20
                        padding: 20

                        TaskView:
                            id: task_list

                        MDBoxLayout:
                            orientation: 'horizontal'
                            size_hint_y: 0.1

                            MDRectangleFlatButton:
                                text: "Назад"
                                size_hint_x: 0.2
                                on_press: operation_table_screen_manager.current = 'table_choose'
                            MDLabel:
                                size_hint_x: 0.8

        Navigation:
            title: "Оперативные документы"


<Navigation>:
    pos_hint: {"top": 1}
    size_hint_y: 0.1


<CustomerCard>:
    size_hint_y: None
    height: content.height

    MDCardSwipeFrontBox:
        MDGridLayout:
            height: 100
            size_hint_y: None
            cols: 5
            rows: 1
            spacing: 10
            id: content
            MDTextField:
                width: 100
                size_hint_x: None
                text: root.customerCode
            MDTextField:
                text: root.customerName
            MDTextField:
                text: root.customerLocation
            MDTextField:
                width: 100
                size_hint_x: None
                text: root.customerPhone
            MDBoxLayout:
                width: 50
                size_hint_x: None
                orientation: 'vertical'
                MDIconButton:
                    icon: "content-save-edit"
                    theme_icon_color: "Custom"
                    icon_color: app.save_color
                    on_press: app.update_customer(root)

                MDIconButton:
                    icon: "trash-can"
                    theme_icon_color: "Custom"
                    icon_color: app.error_color
                    pos_hint: {"center_y": .5}
                    on_press: app.delete_customer(root)


<WorkerCard>:
    size_hint_y: None
    height: content.height

    MDCardSwipeFrontBox:
        MDGridLayout:
            height: 100
            size_hint_y: None
            cols: 7
            rows: 1
            spacing: 10
            id: content
            MDTextField:
                width: 100
                size_hint_x: None
                text: root.workerCode
            MDTextField:
                text: root.workerFIO
            MDTextField:
                width: 100
                size_hint_x: None
                text: root.professionCode
            MDTextField:
                width: 100
                size_hint_x: None
                text: root.hireDate
            MDTextField:
                text: root.workerLocation
            MDTextField:
                width: 100
                size_hint_x: None
                text: root.workerPhone
            MDBoxLayout:
                width: 50
                size_hint_x: None
                orientation: 'vertical'
                MDIconButton:
                    icon: "content-save-edit"
                    theme_icon_color: "Custom"
                    icon_color: app.save_color
                    on_press: app.update_worker(root)

                MDIconButton:
                    icon: "trash-can"
                    theme_icon_color: "Custom"
                    icon_color: app.error_color
                    pos_hint: {"center_y": .5}
                    on_press: app.delete_worker(root)


<WorkCard>:
    size_hint_y: None
    height: 100

    MDCardSwipeFrontBox:
        MDGridLayout:
            height: 100
            size_hint_y: None
            cols: 4
            rows: 1
            spacing: 10
            MDTextField:
                text: root.workCode
            MDTextField:
                text: str(root.workPrice)
            MDTextField:
                text: str(root.workTime)
            MDBoxLayout:
                width: 50
                size_hint_x: None
                orientation: 'vertical'
                MDIconButton:
                    icon: "content-save-edit"
                    theme_icon_color: "Custom"
                    icon_color: app.save_color
                    on_press: app.update_work(root)

                MDIconButton:
                    icon: "trash-can"
                    theme_icon_color: "Custom"
                    icon_color: app.error_color
                    pos_hint: {"center_y": .5}
                    on_press: app.delete_work(root)


<SPTCard>:
    size_hint_y: None
    height: 100

    MDCardSwipeFrontBox:
        MDGridLayout:
            height: 100
            size_hint_y: None
            cols: 5
            rows: 1
            spacing: 10
            MDTextField:
                width: 100
                size_hint_x: None
                text: root.sptCode
            MDTextField:
                text: root.sptName
            MDTextField:
                width: 100
                size_hint_x: None
                text: root.sptIzm
            MDTextField:
                width: 100
                size_hint_x: None
                text: str(root.sptPrice)
            MDBoxLayout:
                width: 50
                size_hint_x: None
                orientation: 'vertical'
                MDIconButton:
                    icon: "content-save-edit"
                    theme_icon_color: "Custom"
                    icon_color: app.save_color
                    on_press: app.update_spt(root)

                MDIconButton:
                    icon: "trash-can"
                    theme_icon_color: "Custom"
                    icon_color: app.error_color
                    pos_hint: {"center_y": .5}
                    on_press: app.delete_spt(root)


<SpecificationCard>:
    size_hint_y: None
    height: 100
    adaptive_height: True

    MDCardSwipeFrontBox:
        MDGridLayout:
            height: 100
            size_hint_y: None
            cols: 7
            rows: 1
            spacing: 10
            adaptive_height: True
            MDTextField:
                width: 100
                size_hint_x: None
                text: root.specificationCode
            MDTextField:
                width: 100
                size_hint_x: None
                text: root.contractCode
            MDTextField:
                width: 100
                size_hint_x: None
                text: root.customerCode
            MDTextField:
                width: 100
                size_hint_x: None
                text: root.sptCode
            MDBoxLayout:
                orientation: 'vertical'
                id: panel_layout
                adaptive_height: True
            MDTextField:
                width: 100
                size_hint_x: None
                text: str(root.cost)
            MDBoxLayout:
                width: 50
                size_hint_x: None
                orientation: 'vertical'
                MDIconButton:
                    icon: "content-save-edit"
                    theme_icon_color: "Custom"
                    icon_color: app.save_color
                    on_press: app.update_specification(root)

                MDIconButton:
                    icon: "trash-can"
                    theme_icon_color: "Custom"
                    icon_color: app.error_color
                    pos_hint: {"center_y": .5}
                    on_press: app.delete_specification(root)


<TaskCard>:
    size_hint_y: None
    height: 100
    adaptive_height: True

    MDCardSwipeFrontBox:
        MDGridLayout:
            height: 100
            size_hint_y: None
            cols: 7
            rows: 1
            spacing: 10
            adaptive_height: True
            MDTextField:
                width: 100
                size_hint_x: None
                text: root.taskCode
            MDTextField:
                width: 100
                size_hint_x: None
                text: root.contractCode
            MDTextField:
                width: 100
                size_hint_x: None
                text: root.taskDate
            MDBoxLayout:
                orientation: 'vertical'
                id: panel_layout
                adaptive_height: True
            MDTextField:
                width: 100
                size_hint_x: None
                text: str(root.taskCost)
            MDBoxLayout:
                width: 50
                size_hint_x: None
                orientation: 'vertical'
                MDIconButton:
                    icon: "content-save-edit"
                    theme_icon_color: "Custom"
                    icon_color: app.save_color
                    on_press: app.update_task(root)

                MDIconButton:
                    icon: "trash-can"
                    theme_icon_color: "Custom"
                    icon_color: app.error_color
                    pos_hint: {"center_y": .5}
                    on_press: app.delete_task(root)
